# Iris Mobile

## Getting Started

For development you must run this command.

```
flutter packages pub run build_runner watch --delete-conflicting-outputs
```

## FOR WEB to run even in visual studio

```
flutter run -d chrome
```

### Formatting code

`flutter format .`

We use three packages that generate automated dart files in our application to speed up development. They are

- functional_widget: ^0.7.1
- mobx_codegen: ^0.3.9+1
- built_value_generator: ^6.7.1

In order for them to create the automatically generated file you must run:

You know a file is automatically generated by having a `.g.dart` in the file name

## Environments

In the env directory there are 5 files that contain the environment vars for the project.

If using vs_code you can select which file to run/build from the `lib/build_env` directory.

Please contact Brian for more information

```
flutter run -t lib/build_env/build_dev.dart -d {{Device Name}}
```

## Deploy To Web

Flutter deploy

Build

```
flutter build web -t lib/build_env/build_dev.dart
```

Deploy

```
firebase deploy
```

## Upload to Google Playstore

Build for prod use this command to create app bundle to deploy to google play store

```
flutter build appbundle --flavor prod --dart-define=flavor=prod
```

## Build IOS

```
flutter build ipa  --bundle-sksl-path flutter_01.sksl.json --flavor prod --dart-define=flavor=prod
```

```
fvm flutter build ipa  --bundle-sksl-path flutter_01.sksl.json --flavor prod --dart-define=flavor=prod
```

## Build SKSL

```
flutter run --profile --cache-sksl --purge-persistent-cache --flavor prod --dart-define=flavor=prod
```

## Production Release Process

https://www.notion.so/Release-Process-e2c67c0b4e564a9899ee3768890dbf96

## Release Notes

Using Code Magic to pass the release notes. As explained here:
https://docs.codemagic.io/flutter-publishing/publish-release-notes/

Our release notes are stored in the files with this naming pattern `release_notes_<language_localization_code>.txt`

Example: our English release notes go in the file `release_notes_en-US.txt`

Codemagic will automatically send these notes with deployments.
